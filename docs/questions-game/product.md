# 学习游戏化平台 MVP 产品文档

> **产品定位**: 基于AI的学习内容游戏化平台，将知识点转化为趣味答题游戏

## 产品概述

### 产品背景

**灵感来源**: xiaoce.fun 网站的答题模式
- 每日更新的挑战题目
- 多样化的题型设计
- 社交分享属性强
- 轻量化学习体验

**核心问题**:
- 传统学习枯燥乏味，缺乏即时反馈
- 知识点记忆困难，难以长期保持
- 学习动力不足，难以坚持
- 缺乏趣味性和互动性

**解决方案**:
通过AI将学习内容转化为游戏化答题，结合即时反馈、成就系统和社交分享，让学习变得有趣且高效。

---

## 🎯 核心功能设计

### AI 驱动的自适应题目生成系统

**核心流程：**
```
用户输入知识点
  ↓
AI 分析知识点特征（使用 Claude/Gemini）
  ↓
智能匹配最合适的题型
  ↓
根据题型 Schema 生成结构化数据
  ↓
前端组件渲染题目
```

### 支持的题型

| 题型 | 适用知识点类型 | Schema 核心字段 | 例子 |
|------|----------------|-----------------|------|
| **线索题** | 人物/地点/概念/发明 | `clues[]`, `answer`, `difficulty` | "他发明了电灯" → 爱迪生 |
| **填空题** | 公式/定义/时间/名称 | `sentence`, `blanks[]`, `options[]` | "牛顿第____定律" |
| **看图猜X** | 具体事物/标志性场景 | `imageUrl`, `type`, `answer`, `hints[]` | 电影海报 → 《盗梦空间》 |
| **事件排序** | 历史/流程/步骤 | `events[]`, `correctOrder[]` | 排序：辛亥革命/五四运动/新中国成立 |

### AI 题型匹配策略

**方案：AI 推理 + 结构化输出**

让 AI 分析知识点后输出：
```json
{
  "knowledgePoint": "爱迪生",
  "recommendedType": "clue",
  "confidence": 0.95,
  "alternativeTypes": ["fill-blank"],
  "reason": "人物类知识点适合通过线索逐步揭示",
  "schema": { /* 题目数据 */ }
}
```

**处理边缘情况：**
- 不适合任何题型 → `"type": "none"`
- 适合多种题型 → `"type": "multiple"` + 随机选择或全部生成

### 图片生成策略（看图猜X）

**阶段性方案：**
- **Phase 1（MVP）**: 使用文字描述代替图片
  - 例："一个穿着红白条纹衣服、戴着眼镜的男孩" → 威利
- **Phase 2**: 接入 Google Gemini 图片生成 API
- **Phase 3**: 支持用户上传自定义图片

---

## 📋 开发计划

### Phase 1: 线索题原型（当前阶段）✅

**目标：** 小步快走，验证核心流程

**技术方案：**
- 不存储数据库，纯前端 + AI API
- 使用 Claude API 进行推理和题目生成
- 图片生成使用 Google Gemini

**开发步骤：**
1. ✅ 设计线索题 TypeScript Schema
2. ✅ 编写 AI Prompt 模板
3. ⏳ 创建线索题 React 组件
4. ⏳ 实现 API Route（调用 Claude）
5. ⏳ 测试 20 个不同类型的知识点

**线索题 Schema：**
```typescript
interface ClueQuestion {
  id: string
  type: 'clue'
  knowledgePoint: string
  difficulty: 1 | 2 | 3  // 简单/中等/困难
  tags: string[]
  clues: string[]  // 按难度递减排序
  answer: string
  hints?: string[]  // 可选的额外提示
  explanation?: string  // 答案解析
}
```

**示例数据：**
```json
{
  "id": "clue_001",
  "type": "clue",
  "knowledgePoint": "爱迪生",
  "difficulty": 2,
  "tags": ["人物", "发明家", "历史"],
  "clues": [
    "这个人生活在19-20世纪",
    "他拥有超过1000项专利",
    "他的一项发明改变了人类的夜晚",
    "他创办了通用电气公司的前身",
    "他发明了实用的电灯泡"
  ],
  "answer": "爱迪生",
  "hints": ["提示：他的名字以'爱'开头"],
  "explanation": "托马斯·爱迪生（1847-1931），美国发明家，被称为'发明大王'"
}
```

### Phase 2: 补全其他题型

1. **填空题组件**
2. **看图猜X组件**
3. **事件排序组件**

### Phase 3: AI 匹配优化

1. 优化 AI Prompt，提高题型匹配准确度
2. 添加难度自适应调节
3. 支持批量生成（输入一个主题 → 生成10道题）

### Phase 4: 大规模测试

**测试方案：**
```
生成 100 个不同领域的知识点
  ↓
AI 自动匹配题型并生成题目
  ↓
统计匹配成功率和题型分布
  ↓
人工评审题目质量
```

**评估指标：**
- 匹配成功率（目标 > 85%）
- 题型分布均衡性
- 题目质量评分（1-5分）
- 生成耗时（目标 < 3秒/题）

**输出报告：**
```json
{
  "总数": 100,
  "成功匹配": 87,
  "匹配分布": {
    "clue": 32,
    "fill-blank": 28,
    "guess-image": 15,
    "event-order": 12
  },
  "平均质量分": 4.2,
  "失败案例": [
    { "point": "爱", "reason": "过于抽象，无法转化为具体题目" }
  ]
}
```

### Phase 5: 产品化功能

- [ ] 题目收藏/分享
- [ ] 每日挑战模式
- [ ] 成就系统
- [ ] 排行榜
- [ ] 数据持久化（数据库）

---

## 🎨 质量保障

### 难度调节机制

**简单模式：**
- 线索数量多（5-7条）
- 线索更直接
- 提供额外提示

**困难模式：**
- 线索数量少（3-4条）
- 线索更抽象
- 无额外提示

### AI 质量自评

让 AI 为生成的题目打分：
```json
{
  "question": { /* 题目数据 */ },
  "qualityScore": 0.85,
  "strengths": ["线索递进合理", "答案唯一明确"],
  "issues": ["第3条线索过于直白"]
}
```

---

## 🔧 技术栈

- **前端框架**: Next.js 15 (App Router)
- **AI 推理**: Claude API (Anthropic)
- **图片生成**: Google Gemini
- **样式**: Tailwind CSS
- **类型安全**: TypeScript
- **数据验证**: Zod

---

## 📊 下一步行动

**当前任务：Phase 1 - 线索题原型**

1. [ ] 创建 `/api/generate-clue` API Route
2. [ ] 编写 Claude Prompt 模板
3. [ ] 实现线索题 React 组件
4. [ ] 创建测试页面 `/questions-game/clue`
5. [ ] 测试 20 个知识点
